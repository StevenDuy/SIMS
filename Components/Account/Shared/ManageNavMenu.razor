@using Microsoft.AspNetCore.Identity
@using SIMS.Data
@inject SignInManager<ApplicationUser> SignInManager

<div class="card-modern" style="padding: 1rem;">
    <div style="display: flex; flex-direction: column; gap: 0.5rem;">

        <NavLink class="manage-nav-link" href="Account/Manage" Match="NavLinkMatch.All">
            <i class="fa-solid fa-user"></i> Profile
        </NavLink>

        <NavLink class="manage-nav-link" href="Account/Manage/Email">
            <i class="fa-solid fa-envelope"></i> Email
        </NavLink>

        <NavLink class="manage-nav-link" href="Account/Manage/ChangePassword">
            <i class="fa-solid fa-key"></i> Password
        </NavLink>

        @if (hasExternalLogins)
        {
            <NavLink class="manage-nav-link" href="Account/Manage/ExternalLogins">
                <i class="fa-brands fa-google"></i> External logins
            </NavLink>
        }

        <NavLink class="manage-nav-link" href="Account/Manage/TwoFactorAuthentication">
            <i class="fa-solid fa-shield-halved"></i> 2FA Authentication
        </NavLink>

        <NavLink class="manage-nav-link" href="Account/Manage/PersonalData">
            <i class="fa-solid fa-database"></i> Personal data
        </NavLink>
    </div>
</div>

<style>
    .manage-nav-link {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px 16px;
        border-radius: 12px;
        color: var(--text-muted);
        text-decoration: none;
        transition: all 0.2s ease;
        font-weight: 500;
        border: 1px solid transparent;
    }

        .manage-nav-link:hover {
            background-color: #f8fafc;
            color: var(--primary);
            transform: translateX(4px);
        }

        .manage-nav-link.active {
            background: linear-gradient(90deg, #e0e7ff 0%, #f3e8ff 100%);
            color: var(--primary);
            border-color: #c7d2fe;
            font-weight: 600;
            box-shadow: var(--shadow-sm);
        }

        .manage-nav-link i {
            width: 20px;
            text-align: center;
        }
</style>

@code {
    private bool hasExternalLogins;
    protected override async Task OnInitializedAsync()
    {
        hasExternalLogins = (await SignInManager.GetExternalAuthenticationSchemesAsync()).Any();
    }
}